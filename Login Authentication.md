# 로그인 방식
유저가 로그인을 하면 유저에게 입장권을 만들어서 보낸다.

### 입장권을 위조?
> hash 해싱
1. hash(입장권 내용 + 서버에서 정한 비밀번호): 해싱을 하면 랜덤문자(hash: abcd1234)가 나오는데, 그걸 같이 보낸다.
2. 유저가 입장권을 위조: (위조된 입장권 내용 + 비번)을 서버에서 해싱해본다.(hash: abcd5555)
3. 입장권에 써있는 랜덤문자(hash: abcd5555)와 서버에서 구한 랜덤문자(hash: abcd1234)가 서로 다르다면 위조됐다는 것을 알아차릴 수 있다.


## Session(서버 기반 인증)
- DB에 저장된 Session ID 등 간단한 정보를 입장권에 적어서 유저에게 보낸다.

### 장점
1. 보안 좋음: 서버에서 세션을 관리하기 때문에 토큰 탈취 위험이 적다.
2. 세션 만료, 강제 로그아웃 가능: 사용자가 로그아웃한다면 서버에서 세션을 제거할 수 있다.
3. 클라이언트 부담적음: 클라이언트는 쿠키만 관리하면 된다.

### 단점
1. 확장성 낮음: 서버가 세션정보를 저장해야해서 부하가 커진다.(로드 밸런싱 어렵)
2. API방식에 불리: 모바일/SPA(React, Vue)와 연동이 어렵고 RESTful하지 않다.
3. CSRF 위험: 쿠키 기반이라서 CSRF 공격에 취약하다.(Spring Security에서 CSRF 공격 방지 기능을 지원해준다.)

## JWT(토큰 기반 인증)
- 입장권에 유저이름, 전화번호, 유효기간 등 많은 정보를 적어서 보낸다.
- 입장권을 서버에 제출하면 DB조회 할 필요없이 입장권만 보고 로그인여부 판단가능(유저가 많아져도 DB부담이 적음)


### 장점
1. 확장성 좋음: 서버가 상태를 저장하지 않아서 로드 밸런싱이 쉽다.(무상태)
2. API친화적: 모바일, React/Vue 같은 프론트엔드에서도 쉽게 사용가능하다.
3. CSRF 방어: JWT는 보통 Autorization 헤더로 전달되기 때문에 CSRF 방어에 유리하다.

### 단점
1. 보안 위험: 토큰이 탈취된다면 만료 전까지 유효하기 때문에 무효화가 어렵다.
2. 토큰 크기가 큼: 세션 방식 보다 더 많은 정보를 가지고 있기 때문에 네트워크 트래픽 증가할 수 있다.
3. 강제 로그아웃 어려움: 사용자가 로그아웃을 해도 서버에서 즉시 만료시키기 어렵다.(Refresh Token 필요)
